<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Admin Track and Trace Shipment</title>
<style>
  /* Contoh styling background sama seperti customer */
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg, #e0f7fa, #80deea);
    margin: 20px;
  }
  h2 {
    text-align: center;
    color: #00796b;
  }
  .search-container {
    margin-bottom: 10px;
    display: flex;
    justify-content: space-between;
  }
  input[type="search"], select {
    padding: 8px 12px;
    font-size: 1rem;
    border-radius: 4px;
    border: 1px solid #00796b;
    width: 200px;
  }
  table {
    width: 100%;
    border-collapse: collapse;
    background: white;
    border-radius: 6px;
    overflow: hidden;
    box-shadow: 0 2px 5px rgb(0 0 0 / 0.1);
  }
  th, td {
    padding: 12px 15px;
    border-bottom: 1px solid #ddd;
    text-align: left;
  }
  th {
    background-color: #004d40;
    color: white;
  }
  tr:hover {
    background-color: #b2dfdb;
  }
  /* Input tanggal */
  input[type="text"].date-input {
    width: 140px;
  }
</style>
</head>
<body>

<h2>Admin Track and Trace Shipment</h2>

<div class="search-container">
  <input type="search" id="searchBox" placeholder="Cari shipment..." onkeyup="filterTable()" />
  
  <select id="statusFilter" onchange="filterTable()">
    <option value="">Filter Status</option>
    <option value="Delivered">Delivered</option>
    <option value="In Transit">In Transit</option>
    <option value="Pending">Pending</option>
  </select>
</div>

<table id="shipmentTable">
  <thead>
    <tr>
      <th>Shipment ID</th>
      <th>Customer</th>
      <th>Status</th>
      <th>Ship Date</th>
      <!-- detail container dihapus -->
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>SHP001</td>
      <td>PT Sukses</td>
      <td>Delivered</td>
      <td><input type="text" class="date-input" onblur="formatDate(this)" placeholder="dd/mm/yy" /></td>
    </tr>
    <tr>
      <td>SHP002</td>
      <td>CV Makmur</td>
      <td>In Transit</td>
      <td><input type="text" class="date-input" onblur="formatDate(this)" placeholder="dd/mm/yy" /></td>
    </tr>
    <tr>
      <td>SHP003</td>
      <td>PT Jaya</td>
      <td>Pending</td>
      <td><input type="text" class="date-input" onblur="formatDate(this)" placeholder="dd/mm/yy" /></td>
    </tr>
  </tbody>
</table>

<script>
  function filterTable() {
    const searchValue = document.getElementById('searchBox').value.toLowerCase();
    const statusFilter = document.getElementById('statusFilter').value.toLowerCase();
    const table = document.getElementById('shipmentTable');
    const trs = table.tBodies[0].getElementsByTagName('tr');

    for (let row of trs) {
      const cellsText = Array.from(row.cells).map(c => c.textContent.toLowerCase());
      const matchesSearch = cellsText.some(text => text.includes(searchValue));
      const matchesStatus = statusFilter === '' || row.cells[2].textContent.toLowerCase() === statusFilter;

      row.style.display = (matchesSearch && matchesStatus) ? '' : 'none';
    }
  }

  function formatDate(input) {
    let val = input.value.trim();
    // Cek format dd/mm/yy atau dd/m/yy
    const regex = /^(\d{1,2})\/(\d{1,2})\/(\d{2})$/;
    if (!regex.test(val)) return; // jika bukan format, abaikan

    const [_, d, m, y] = val.match(regex);
    // Buat tanggal lengkap
    const months = [
      'January', 'February', 'March', 'April', 'May', 'June',
      'July', 'August', 'September', 'October', 'November', 'December'
    ];

    // Tambah 2000 ke tahun agar jadi 4 digit, contoh 25 -> 2025
    const fullYear = 2000 + parseInt(y, 10);

    const day = parseInt(d, 10);
    const monthIndex = parseInt(m, 10) - 1;

    // Validasi tanggal
    if (monthIndex < 0 || monthIndex > 11 || day < 1 || day > 31) return;

    input.value = `${day} ${months[monthIndex]} ${fullYear}`;
  }
</script>

</body>
</html>
